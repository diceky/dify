services:
  - type: web
    name: dify-web
    env: docker
    image:
      url: langgenius/dify-web:latest
    plan: starter
    envVars:
      - key: CONSOLE_WEB_URL
        value: ""
      - key: APP_WEB_URL
        value: ""
      - key: CONSOLE_API_URL
        value: ""
      - key: SERVICE_API_URL
        value: ""
      - key: APP_API_URL
        value: ""
      - key: FILES_URL
        value: ""
      - key: SECRET_KEY
        value: ""
      - key: DATABASE_URL
        value: ""
      - key: REDIS_URL
        value: ""
      - key: DEFAULT_MODEL_PROVIDER
        value: "google"
      - key: GOOGLE_API_KEY
        value: ""
      - key: GOOGLE_MODEL
        value: "gemini-1.5-flash"
      - key: OPENAI_API_KEY
        value: ""
      # Uncomment this block across all three services if you use S3
      # - key: STORAGE_TYPE
      #   value: "s3"
      # - key: S3_ENDPOINT
      #   value: "https://s3.ap-southeast-2.amazonaws.com"
      # - key: S3_REGION
      #   value: "ap-southeast-2"
      # - key: S3_BUCKET
      #   value: "dify-files"
      # - key: S3_ACCESS_KEY
      #   value: ""
      # - key: S3_SECRET_KEY
      #   value: ""

  - type: web
    name: dify-api
    env: docker
    image:
      url: langgenius/dify-api:latest
    plan: starter
    envVars:
      - key: SERVICE_API_URL
        value: ""
      - key: CONSOLE_API_URL
        value: ""
      - key: APP_API_URL
        value: ""
      - key: FILES_URL
        value: ""
      - key: CONSOLE_WEB_URL
        value: ""
      - key: APP_WEB_URL
        value: ""
      - key: SECRET_KEY
        value: ""
      - key: DATABASE_URL
        value: ""
      - key: REDIS_URL
        value: ""
      - key: DEFAULT_MODEL_PROVIDER
        value: "google"
      - key: GOOGLE_API_KEY
        value: ""
      - key: GOOGLE_MODEL
        value: "gemini-1.5-flash"
      - key: OPENAI_API_KEY
        value: ""
      # If using LOCAL storage, mount a disk here and on worker at /app/api/storage

  - type: worker
    name: dify-worker
    env: docker
    image:
      url: langgenius/dify-worker:latest
    plan: starter
    envVars:
      - key: SECRET_KEY
        value: ""
      - key: DATABASE_URL
        value: ""
      - key: REDIS_URL
        value: ""
      - key: DEFAULT_MODEL_PROVIDER
        value: "google"
      - key: GOOGLE_API_KEY
        value: ""
      - key: GOOGLE_MODEL
        value: "gemini-1.5-flash"
      - key: OPENAI_API_KEY
        value: ""

databases:
  - name: dify-postgres
    plan: starter
